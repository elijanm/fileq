<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contract Verification - {{ contract_id }}</title>
    <style>
      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }

      body {
          font-family: 'Arial', sans-serif;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          min-height: 100vh;
          padding: 40px 20px;
      }

      .container {
          max-width: 900px;
          margin: 0 auto;
          background: white;
          border-radius: 12px;
          box-shadow: 0 10px 40px rgba(0,0,0,0.2);
          overflow: hidden;
      }

      .header {
          background: {{ status_color }};
          color: white;
          padding: 30px;
          text-align: center;
      }

      .header h1 {
          font-size: 28px;
          margin-bottom: 10px;
      }

      .header .status {
          font-size: 18px;
          font-weight: bold;
          opacity: 0.9;
      }

      .content {
          padding: 40px;
      }

      .section {
          margin-bottom: 35px;
          border-bottom: 1px solid #eee;
          padding-bottom: 25px;
      }

      .section:last-child {
          border-bottom: none;
      }

      .section h2 {
          color: #2e7d32;
          font-size: 20px;
          margin-bottom: 15px;
          display: flex;
          align-items: center;
          gap: 10px;
      }

      .info-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 15px;
      }

      .info-item {
          background: #f9f9f9;
          padding: 15px;
          border-radius: 8px;
          border-left: 4px solid #2e7d32;
      }

      .info-label {
          font-size: 12px;
          color: #666;
          text-transform: uppercase;
          margin-bottom: 5px;
          font-weight: bold;
      }

      .info-value {
          font-size: 14px;
          color: #333;
          word-break: break-word;
      }

      .signature-box {
          background: #f5f5f5;
          border: 2px solid #ddd;
          border-radius: 8px;
          padding: 20px;
          margin-bottom: 15px;
      }

      .signature-status {
          display: inline-block;
          padding: 6px 15px;
          border-radius: 20px;
          font-size: 12px;
          font-weight: bold;
          margin-bottom: 15px;
      }

      .signed {
          background: #d4edda;
          color: #155724;
      }

      .not-signed {
          background: #fff3cd;
          color: #856404;
      }

      .hash-value {
          font-family: 'Courier New', monospace;
          font-size: 11px;
          color: #666;
          word-break: break-all;
          background: white;
          padding: 10px;
          border-radius: 4px;
          margin-top: 5px;
      }

      .legal-notice {
          background: #e8f5e9;
          border: 2px solid #2e7d32;
          border-radius: 8px;
          padding: 20px;
          margin-top: 30px;
      }

      .legal-notice h3 {
          color: #2e7d32;
          margin-bottom: 10px;
      }

      .legal-notice p {
          font-size: 13px;
          line-height: 1.6;
          color: #333;
          margin-bottom: 10px;
      }

      .icon {
          font-size: 24px;
      }

      .footer {
          text-align: center;
          padding: 20px;
          background: #f9f9f9;
          color: #666;
          font-size: 12px;
          line-height: 1.6;
      }

      @media (max-width: 768px) {
          .info-grid {
              grid-template-columns: 1fr;
          }
          .header h1 {
              font-size: 22px;
          }
          .content {
              padding: 20px;
          }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- HEADER -->
      <div class="header">
        <h1>üîí Contract Verification</h1>
        <div class="status">{{ status_text }}</div>
        <p style="margin-top: 10px; opacity: 0.9">
          Contract ID: {{ contract_id }}
        </p>
      </div>

      <div class="content">
        <!-- CONTRACT INFORMATION -->
        <div class="section">
          <h2><span class="icon">üìÑ</span> Contract Information</h2>
          <div class="info-grid">
            <div class="info-item">
              <div class="info-label">Property</div>
              <div class="info-value">{{ property.name }}</div>
            </div>
            <div class="info-item">
              <div class="info-label">Location</div>
              <div class="info-value">{{ property.location }}</div>
            </div>
            <div class="info-item">
              <div class="info-label">Lease Start</div>
              <div class="info-value">{{ contract.lease_start }}</div>
            </div>
            <div class="info-item">
              <div class="info-label">Lease End</div>
              <div class="info-value">{{ contract.lease_end }}</div>
            </div>
            <div class="info-item">
              <div class="info-label">Contract Status</div>
              <div class="info-value">{{ contract.status|upper }}</div>
            </div>
            <div class="info-item">
              <div class="info-label">Created On</div>
              <div class="info-value">{{ contract.created_at }}</div>
            </div>
          </div>
        </div>

        <!-- TENANT SIGNATURE -->
        <div class="section">
          <h2><span class="icon">‚úçÔ∏è</span> Tenant Signature</h2>
          <div class="signature-box">
            <span
              class="signature-status {{ 'signed' if tenant_signature.signed else 'not-signed' }}"
            >
              {{ '‚úì SIGNED' if tenant_signature.signed else '‚è≥ NOT SIGNED' }}
            </span>
            <div class="info-grid">
              <div class="info-item">
                <div class="info-label">Signer Name</div>
                <div class="info-value">{{ tenant_signature.signer_name }}</div>
              </div>
              {% if tenant_signature.signed %}
              <div class="info-item">
                <div class="info-label">Signed Date</div>
                <div class="info-value">{{ tenant_signature.signed_date }}</div>
              </div>
              <div class="info-item">
                <div class="info-label">IP Address</div>
                <div class="info-value">
                  {{ tenant_signature.metadata.ip_address }}
                </div>
              </div>
              <div class="info-item">
                <div class="info-label">Location</div>
                <div class="info-value">
                  {{ tenant_signature.metadata.location }}
                </div>
              </div>
              <div class="info-item">
                <div class="info-label">Device</div>
                <div class="info-value">
                  {{ tenant_signature.metadata.platform }} - {{
                  tenant_signature.metadata.browser }}
                </div>
              </div>
              <div class="info-item">
                <div class="info-label">Device Type</div>
                <div class="info-value">
                  {{ tenant_signature.metadata.device_type }}
                </div>
              </div>
              {% endif %}
            </div>
            {% if tenant_signature.signed %}
            <div style="margin-top: 15px">
              <div class="info-label">Signature Hash (SHA-256)</div>
              <div class="hash-value">
                {{ tenant_signature.metadata.signature_hash }}
              </div>
            </div>
            {% endif %}
          </div>
        </div>

        <!-- LANDLORD SIGNATURE -->
        <div class="section">
          <h2><span class="icon">üè¢</span> Landlord Signature</h2>
          <div class="signature-box">
            <span
              class="signature-status {{ 'signed' if landlord_signature.signed else 'not-signed' }}"
            >
              {{ '‚úì SIGNED' if landlord_signature.signed else '‚è≥ NOT SIGNED' }}
            </span>
            <div class="info-grid">
              <div class="info-item">
                <div class="info-label">Signer Name</div>
                <div class="info-value">
                  {{ landlord_signature.signer_name }}
                </div>
              </div>
              {% if landlord_signature.signed %}
              <div class="info-item">
                <div class="info-label">Signed Date</div>
                <div class="info-value">
                  {{ landlord_signature.signed_date }}
                </div>
              </div>
              <div class="info-item">
                <div class="info-label">IP Address</div>
                <div class="info-value">
                  {{ landlord_signature.metadata.ip_address }}
                </div>
              </div>
              <div class="info-item">
                <div class="info-label">Location</div>
                <div class="info-value">
                  {{ landlord_signature.metadata.location }}
                </div>
              </div>
              <div class="info-item">
                <div class="info-label">Device</div>
                <div class="info-value">
                  {{ landlord_signature.metadata.platform }} - {{
                  landlord_signature.metadata.browser }}
                </div>
              </div>
              <div class="info-item">
                <div class="info-label">Device Type</div>
                <div class="info-value">
                  {{ landlord_signature.metadata.device_type }}
                </div>
              </div>
              {% endif %}
            </div>
            {% if landlord_signature.signed %}
            <div style="margin-top: 15px">
              <div class="info-label">Signature Hash (SHA-256)</div>
              <div class="hash-value">
                {{ landlord_signature.metadata.signature_hash }}
              </div>
            </div>
            {% endif %}
          </div>
        </div>

        <!-- LEGAL NOTICE -->
        <div class="legal-notice">
          <h3>üîê Legal Compliance & Verification</h3>
          <p>
            <strong>Governed by:</strong> Laws of Kenya - Evidence Act (Cap 80)
            & Kenya Information and Communications Act
          </p>
          <p>
            <strong>Digital Signature Validity:</strong> This electronically
            signed document is legally binding under Kenyan law. The
            cryptographic hashes above provide tamper-evident verification. Any
            modification to the contract after signing will result in different
            hash values, invalidating the signatures.
          </p>
          <p>
            <strong>Verification Instructions:</strong> The signature metadata
            captured at the time of signing (timestamp, IP address, geolocation,
            device information) serves as forensic evidence and is immutable.
            This data can be used in legal proceedings to verify the
            authenticity and integrity of the contract.
          </p>
          <p>
            <strong>Contact Support:</strong> For verification assistance or
            questions, contact {{ property.email }}
          </p>
        </div>
      </div>

      <!-- FOOTER -->
      <div class="footer">
        <p><strong>{{ property.name }}</strong></p>
        <p>{{ property.location }}</p>
        <p style="margin-top: 10px">
          Verification performed on {{ verification_timestamp }}
        </p>
        <p style="margin-top: 5px; opacity: 0.7">
          This is a public verification page. No sensitive financial information
          is displayed.
        </p>
      </div>
    </div>
  </body>
</html>
